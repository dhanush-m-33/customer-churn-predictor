<!DOCTYPE html>
<html>
<head>
    <title>User Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<nav>
    <div class="logo">User Dashboard</div>
    <div class="nav-actions">
        <button class="btn-outline" onclick="logout()">Logout</button>
    </div>
</nav>

<div class="container">

    <!-- Prediction Form -->
    <div class="card">
        <h3>Churn Prediction Form</h3>

        <form id="prediction-form" class="input-grid">
            <div>
                <label>Tenure (months)</label>
                <input type="number" id="tenure" min="0" max="120" value="12" required>
            </div>

            <div>
                <label>Watch Hours/Week</label>
                <input type="number" id="watch_hours" min="0" max="50" value="10" required>
            </div>

            <div>
                <label>Days Since Last Login</label>
                <input type="number" id="days_since_login" min="0" max="90" value="5" required>
            </div>

            <div>
                <label>Subscription Type</label>
                <select id="subscription_type" required>
                    <option value="basic">Basic (₹299)</option>
                    <option value="standard" selected>Standard (₹599)</option>
                    <option value="premium">Premium (₹999)</option>
                </select>
            </div>

            <div>
                <label>Tickets Raised</label>
                <input type="number" id="tickets_raised" min="0" max="20" value="1" required>
            </div>

            <div>
                <label>Profiles Used</label>
                <input type="number" id="profiles_used" min="1" max="5" value="2" required>
            </div>

            <div style="grid-column: 1 / -1;">
                <button type="submit" class="submit-btn">Predict Churn</button>
            </div>
        </form>
    </div>

    <!-- Result -->
    <div class="card">
        <h3>Your Churn Probability</h3>
        <div class="progress-container">
            <div id="probBar" class="progress-bar low" style="width:0%">0%</div>
        </div>
    </div>

    <!-- History -->
    <div class="card">
        <h3>Prediction History</h3>
        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Probability</th>
                        <th>Risk</th>
                    </tr>
                </thead>
                <tbody id="history">
                    <tr>
                        <td colspan="3">Loading...</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Chart -->
    <div class="card">
        <h3>Your Analytics (Last 10)</h3>
        <div class="chart-container">
            <canvas id="userChart"></canvas>
        </div>
    </div>

</div>

<script src="/static/predict.js"></script>
<script src="/static/dashboard.js"></script>
<script src="/static/auth.js"></script>
</body>
</html>
